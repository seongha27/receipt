# 🚀 네이버 리뷰 관리 시스템

고객사별 업체 관리와 네이버 플레이스 리뷰 자동 추출 시스템

## ✨ 주요 기능

### 🔐 사용자 권한 시스템
- **👑 시스템 관리자**: 전체 시스템 관리, 고객사/업체/리뷰어 생성, 리뷰 추출 권한
- **🏢 고객사**: 업체별 현황 조회, 리포트 다운로드, 완료 상태 관리
- **👤 리뷰어**: 배정된 업체의 리뷰 URL 등록

### 📊 리뷰 관리
- **두 가지 네이버 링크 형식 지원**:
  - `https://naver.me/5jBm0HYx` (단축 URL)
  - `https://m.place.naver.com/my/review/68affe6981fb5b79934cd611?v=2` (직접 링크)
- **자동 리뷰 본문 및 영수증 날짜 추출**
- **실시간 처리 상태 모니터링**

### 🏢 업체 관리
- **고객사별 업체 등록**: 시작일, 하루 목표 갯수, 캠페인 일수
- **자동 종료일 계산**: 시작일 + 캠페인 일수
- **진행률 추적**: 완료수/목표수 (%)
- **상태별 분류**: 대기/진행중/완료
- **연장 기능**: 관리자 권한으로 목표 갯수 추가

### 📁 리포트 시스템
- **전체 리포트**: 고객사별 모든 완료 리뷰 CSV
- **업체별 리포트**: 개별 업체 전용 CSV (업체명으로 파일명)
- **4개 컬럼**: 업체명, 리뷰URL, 리뷰내용, 영수증날짜

## 🛠️ 기술 스택

- **백엔드**: FastAPI
- **데이터베이스**: SQLite
- **프론트엔드**: HTML + JavaScript (Form 기반)
- **리뷰 추출**: Selenium + Chrome WebDriver
- **HTML 파싱**: BeautifulSoup4

## 📦 설치 방법

### 1. 저장소 클론
```bash
git clone https://github.com/seongha27/receipt.git
cd receipt
```

### 2. 의존성 설치
```bash
pip install -r requirements.txt
```

### 3. Chrome WebDriver 설치
- Chrome 브라우저 설치 필요
- ChromeDriver 자동 설치 또는 수동 설치

### 4. 서버 실행
```bash
python main.py
```

### 5. 접속
- **로컬**: http://localhost:8000
- **서버**: 배포된 도메인 주소

## 🔑 초기 설정

### 기본 관리자 계정
- **ID**: admin
- **비밀번호**: doemtmzpcl1!

### 초기 설정 순서
1. **관리자 로그인**
2. **고객사 생성**: 고객사명 + 비밀번호 설정
3. **업체 등록**: 소속 고객사 + 업체명 + 캠페인 설정
4. **리뷰어 생성**: 리뷰어명 + 비밀번호 설정
5. **업체-리뷰어 배정**: 드롭다운으로 매칭

## 📱 사용 방법

### 👑 시스템 관리자
1. **고객사 관리**: 새 고객사 계정 생성
2. **업체 관리**: 업체 등록 및 연장 관리
3. **리뷰어 관리**: 리뷰어 계정 생성
4. **배정 관리**: 리뷰어-업체 매칭
5. **리뷰 관리**: URL 등록 및 실제 추출 실행

### 🏢 고객사
1. **현황 대시보드**: 전체/완료/대기/실패 통계
2. **업체별 현황**: 진행률 및 상태 확인
3. **상태별 분류**: 진행중/완료 탭 분리
4. **검색 기능**: 업체명 필터 및 검색
5. **리포트 다운로드**: 전체 또는 업체별 CSV

### 👤 리뷰어
1. **담당 업체 확인**: 배정된 업체 목록
2. **리뷰 URL 등록**: 네이버 리뷰 링크 등록
3. **진행 상황 확인**: 등록한 리뷰의 추출 상태

## 🔍 네이버 리뷰 추출

### 지원 링크 형식
- **단축 URL**: https://naver.me/... (업체명 정확히 매칭 필요)
- **직접 링크**: https://m.place.naver.com/my/review/... (자동 추출)

### 추출 과정
1. **Chrome 자동 실행**: 사용자가 볼 수 있도록 창 표시
2. **네이버 자동 접속**: 실제 리뷰 페이지 방문
3. **업체명 매칭**: 정확한 업체 리뷰 찾기
4. **더보기 클릭**: 전체 리뷰 내용 확장
5. **데이터 추출**: 리뷰 본문 + 영수증 날짜

### 추출 결과
- **리뷰 본문**: 실제 고객 리뷰 텍스트
- **영수증 날짜**: 방문일 정보
- **상태 관리**: 대기 → 처리중 → 완료/실패

## 🚨 주의사항

### 리뷰 추출 제한사항
- **네이버 정책**: 과도한 요청시 일시적 차단 가능
- **업체명 정확성**: 네이버에 표시된 정확한 업체명 필요
- **Chrome 의존성**: Chrome 브라우저 및 WebDriver 필요

### 서버 배포시 고려사항
- **Chrome 설치**: 서버에 Chrome 및 ChromeDriver 설치 필요
- **메모리 사용량**: 동시 추출시 충분한 메모리 확보
- **네트워크 접근**: 네이버 접속 가능한 환경

## 🔒 보안

- **관리자 계정**: 강력한 비밀번호 사용
- **데이터 분리**: 고객사별 완전 격리
- **권한 관리**: 역할별 접근 제한

## 📞 지원

문제 발생시:
1. **로그 확인**: 서버 콘솔 출력
2. **Chrome 상태**: WebDriver 정상 작동 여부
3. **네트워크**: 네이버 접속 가능 여부

---

## 🎯 주요 특징

✅ **실제 네이버 리뷰 추출**  
✅ **고객사별 독립 관리**  
✅ **업체별 진행률 추적**  
✅ **자동 상태 관리**  
✅ **리포트 생성 및 다운로드**  
✅ **실시간 모니터링**  

---

**완전한 네이버 리뷰 관리 솔루션입니다!** 🚀